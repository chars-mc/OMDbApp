!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports="<div class=home> <h2 id=home__title>Home</h2> <div class=movies id=movies></div> </div>"},function(e,t){e.exports="<div class=favorites> <h2>Favorites</h2> <div class=movies id=movies></div> </div>"},function(e,t){e.exports='<div class="errors is-hide" id=errors></div> <form action="" class=form id=loginForm> <h2 class=form__title>Login</h2> <div class=form__input-group> <i class=material-icons>person</i> <input type=text name=username class=input-group__input id=username placeholder=Username> </div> <div class=form__input-group> <i class=material-icons>vpn_key</i> <input type=password name=password class=input-group__input id=password placeholder=Password> </div> <button class=form__button>LOGIN <i class=material-icons>keyboard_arrow_right</i></button> </form>'},function(e,t){e.exports="<div class=error> <h2>404 Not Found</h2> </div>"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(4),n.p;var o=n(0),r=n.n(o);class s{constructor(e,t,n=[]){this.username=e,this.password=t,this.favorites=n}}function i(e){const t=JSON.parse(localStorage.getItem(e.username));sessionStorage.setItem("omdbSession",JSON.stringify(t))}function a(e){return!!JSON.parse(localStorage.getItem(e))}function c(){return JSON.parse(sessionStorage.getItem("omdbSession"))}function d(e){e.classList.add("is-hide")}function l(e){e.classList.remove("is-hide")}function u(e){const t=c().favorites.findIndex(t=>t.Title===e.Title);return`\n      <img src="${e.Poster}" alt="${e.Title}" class="movie__poster">\n      <div class="movie__details">\n         <h4 class="movie__title">${e.Title}</h4>\n         <div class="movie__actions">\n            <button class="movie__read-more">READ MORE\n               <i class="material-icons">arrow_right</i>\n            </button>\n            <button class="movie__add-favorite button">\n               <i class="material-icons favorite-icon">${t>=0?"star":"star_border"}</i>\n            </button>\n         </div>\n      </div>`}function m(e){return`\n      <img class="movie-modal__poster" src="${e.Poster}">\n      <h3 class="movie-modal__title">${e.Title}</h3>\n\n      <div class="movie-modal__details">\n         <p class="movie-modal__type"><b>Type: </b> ${e.Type}</p>\n         <p class="movie-modal__year"><b>Year: </b> ${e.Year}</p>\n         <p class="movie-modal__imdbid"><b>imdbID: </b> ${e.imdbID}</p>\n      </div>\n      <button class="movie-modal__close button"><i class="material-icons">close<i></button>`}let v=[];async function p(e="robot"){const t=await fetch("https://www.omdbapi.com/?i=tt3896198&apikey=cea5004f&s="+e);return await t.json()}function h(e){const t=document.createElement("div");let n=c();return t.className="movie",t.innerHTML=u(e),t.querySelector(".movie__add-favorite").addEventListener("click",()=>{const o=n.favorites.findIndex(t=>t.Title===e.Title);o>=0?(t.querySelector(".favorite-icon").textContent="star_border",n.favorites.splice(o,1)):(n.favorites.push(e),t.querySelector(".favorite-icon").textContent="star"),localStorage.setItem(n.username,JSON.stringify(n)),sessionStorage.setItem("omdbSession",JSON.stringify(n))}),t.querySelector(".movie__read-more").addEventListener("click",()=>{const t=document.createElement("div");t.classList="movie-modal",document.body.classList.add("no-scroll"),t.innerHTML=m(e),t.querySelector(".movie-modal__close").addEventListener("click",e=>{document.body.removeChild(t),document.body.classList.remove("no-scroll")}),document.body.appendChild(t)}),t}var f=n(1),_=n.n(f);var g=n(2),y=n.n(g);var b=n(3),S=n.n(b);const E=async()=>{const e=document.createElement("div");let t=document.createDocumentFragment();return document.getElementById("header__search").classList.remove("is-hide"),e.innerHTML+=r.a,v=await p(),v.Search.forEach(e=>{t.appendChild(h(e))}),e.querySelector("#movies").appendChild(t),document.getElementById("searchField").addEventListener("search",async n=>{if(document.getElementById("root").classList.remove("is-blur"),""===n.target.value)return e.querySelector("#movies").innerHTML="No results";e.querySelector("#home__title").textContent="Results";const o=await p(n.target.value);if(t=document.createDocumentFragment(),o.Error)return e.querySelector("#movies").innerHTML="No results";e.querySelector("#movies").innerHTML="",o.Search.forEach(e=>{t.appendChild(h(e))}),e.querySelector("#movies").appendChild(t)}),e},L=()=>{const e=document.createElement("div"),t=c();if(e.innerHTML=_.a,document.getElementById("header__search").classList.add("is-hide"),t.favorites.length>0){const n=document.createDocumentFragment();t.favorites.forEach(e=>{n.appendChild(function(e,t){const n=document.createElement("div");return n.className="movie",n.innerHTML=u(e),n.querySelector(".movie__add-favorite").addEventListener("click",()=>{const o=t.favorites.findIndex(t=>t.Title===e.Title);o>=0?(n.querySelector(".favorite-icon").textContent="star_border",t.favorites.splice(o,1)):(t.favorites.push(e),n.querySelector(".favorite-icon").textContent="star"),sessionStorage.setItem("omdbSession",JSON.stringify(t)),localStorage.setItem(t.username,JSON.stringify(t))}),n.querySelector(".movie__read-more").addEventListener("click",()=>{const t=document.createElement("div");t.classList="movie-modal",document.body.classList.add("no-scroll"),t.innerHTML=m(e),t.querySelector(".movie-modal__close").addEventListener("click",e=>{document.body.removeChild(t),document.body.classList.remove("no-scroll")}),document.body.appendChild(t)}),n}(e,t))}),e.querySelector("#movies").appendChild(n)}else e.innerHTML+="No movies";return e},w=()=>{const e=document.createElement("div");return d(document.getElementById("header__menu")),d(document.getElementById("header__search")),document.getElementById("header__logo").style.gridColumn="span 3",e.innerHTML=y.a,e.querySelector("#loginForm").addEventListener("submit",t=>{t.preventDefault();let n=new s(t.target.username.value,t.target.password.value,[]);const o=function(e,t){const n=[];e.length<3&&n.push("Username must be greater than 2 characters");t.length<3&&n.push("Password must be greater than 2 characters");a(e)&&!function(e){return JSON.parse(localStorage.getItem(e.username)).password===e.password}({username:e,password:t})&&n.push("Wrong password");return n}(n.username,n.password);if(o.length>0)return function(e=[],t){const n=document.createDocumentFragment();t.innerHTML="",e.forEach(e=>{const t=document.createElement("p");t.innerText=e,n.appendChild(t)}),l(t),t.appendChild(n),setTimeout(()=>{d(t),t.innerHTML=""},2500*e.length)}(o,e.querySelector("#errors"));a(n.username)?i(n):function(e){const t=new s(e.username,e.password,[]);localStorage.setItem(e.username,JSON.stringify(t)),i(e)}(n),l(document.getElementById("header__menu")),l(document.getElementById("header__search")),l(document.getElementById("header__logo")),document.getElementById("header__logo").style.gridColumn="span 1",console.log(c()),location.hash="#/"}),e},I=()=>{const e=document.createElement("div");return e.innerHTML=S.a,e},T=document.getElementById("root"),C=async e=>{switch(T.innerHTML="",c()||(e="#/login"),e){case"#/":return T.appendChild(await E());case"#/favorites":return T.appendChild(L());case"#/login":return T.appendChild(w());default:return T.appendChild(I())}},B=document.getElementById("menu"),M=document.getElementById("searchField");function q(){const e=document.getElementById("root");O(B,"is-hide")&&(O(M,"is-hide")||O(e,"is-blur"))?x():e.classList.add("is-blur")}function x(){document.getElementById("root").classList.remove("is-blur")}function O(e,t){return e.classList.contains(t)}window.addEventListener("hashchange",()=>{C(location.hash),d(B),d(M),x()}),window.addEventListener("load",()=>{C(""===location.hash?"#/":location.hash),document.getElementById("menuButton").addEventListener("click",()=>{B.classList.toggle("is-hide"),d(M),x(),q()}),document.getElementById("searchButton").addEventListener("click",e=>{e.preventDefault(),M.classList.toggle("is-hide"),d(B),x(),q()})}),window.addEventListener("resize",()=>{window.innerWidth>=720&&(d(B),d(M),x())})}]);