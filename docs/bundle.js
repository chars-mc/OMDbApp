!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports="<div class=home> <h2 id=home__title>Home</h2> <div class=movies id=movies></div> </div>"},function(e,t){e.exports="<div class=favorites> <h2>Favorites</h2> <div class=movies id=movies></div> </div>"},function(e,t){e.exports='<div class="errors is-hide" id=errors></div> <form action="" class=form id=loginForm> <h2 class=form__title>Login</h2> <div class=form__input-group> <i class=material-icons>person</i> <input type=text name=username class=input-group__input id=username placeholder=Username> </div> <div class=form__input-group> <i class=material-icons>vpn_key</i> <input type=password name=password class=input-group__input id=password placeholder=Password> </div> <button class=form__button>LOGIN <i class=material-icons>keyboard_arrow_right</i></button> </form>'},function(e,t){e.exports="<div class=error> <h2>404 Not Found</h2> </div>"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(4),n.p;var o=n(0),r=n.n(o);class s{constructor(e,t,n=[]){this.username=e,this.password=t,this.favorites=n}}function i(e){const t=JSON.parse(localStorage.getItem(e.username));sessionStorage.setItem("omdbSession",JSON.stringify(t))}function a(){sessionStorage.removeItem("omdbSession")}function c(e){return!!JSON.parse(localStorage.getItem(e))}function d(){return JSON.parse(sessionStorage.getItem("omdbSession"))}function l(e){e.classList.add("is-hide")}function u(e){e.classList.remove("is-hide")}function m(e,t){const n=function(e,t){const n=document.createElement("div");return n.className="movie",n.innerHTML=function(e,t){const n=e.favorites.findIndex(e=>e.Title===t.Title);return`\n      <img src="${t.Poster}" alt="${t.Title}" class="movie__poster">\n      <div class="movie__details">\n         <h4 class="movie__title">${t.Title}</h4>\n         <div class="movie__actions">\n            <button class="movie__read-more">READ MORE\n               <i class="material-icons">arrow_right</i>\n            </button>\n            <button class="movie__add-favorite button">\n               <i class="material-icons favorite-icon">${n>=0?"star":"star_border"}</i>\n            </button>\n         </div>\n      </div>`}(e,t),n.querySelector(".movie__add-favorite").addEventListener("click",()=>{!function(e,t,n){const o=e.favorites.findIndex(e=>e.Title===t.Title);o>=0?(n.querySelector(".favorite-icon").textContent="star_border",e.favorites.splice(o,1)):(e.favorites.push(t),n.querySelector(".favorite-icon").textContent="star")}(e,t,n),sessionStorage.setItem("omdbSession",JSON.stringify(e)),localStorage.setItem(e.username,JSON.stringify(e))}),n}(t,e);return n.querySelector(".movie__read-more").addEventListener("click",()=>{document.body.appendChild(function(e){const t=document.createElement("div");return t.classList="movie-modal",document.body.classList.add("no-scroll"),t.innerHTML=function(e){return`\n      <img class="movie-modal__poster" src="${e.Poster}">\n      <h3 class="movie-modal__title">${e.Title}</h3>\n\n      <div class="movie-modal__details">\n         <p class="movie-modal__type"><b>Type: </b> ${e.Type}</p>\n         <p class="movie-modal__year"><b>Year: </b> ${e.Year}</p>\n         <p class="movie-modal__imdbid"><b>imdbID: </b> ${e.imdbID}</p>\n      </div>\n      <button class="movie-modal__close button"><i class="material-icons">close<i></button>`}(e),t.querySelector(".movie-modal__close").addEventListener("click",()=>{document.body.removeChild(t),document.body.classList.remove("no-scroll")}),t}(e))}),n}let v=[];async function p(e=localStorage.getItem("omdbSessionLastSearch")||"robot"){const t=await fetch("https://www.omdbapi.com/?i=tt3896198&apikey=cea5004f&s="+e);return await t.json()}var h=n(1),f=n.n(h),g=n(2),_=n.n(g);var y=n(3),b=n.n(y);const S=async()=>{let e=d();const t=document.createElement("div");let n=document.createDocumentFragment();return document.getElementById("header__search").classList.remove("is-hide"),t.innerHTML+=r.a,v=await p(),v.Search.forEach(t=>{n.appendChild(m(t,e))}),t.querySelector("#movies").appendChild(n),document.getElementById("searchField").addEventListener("search",async o=>{if(document.getElementById("root").classList.remove("is-blur"),""===o.target.value)return t.querySelector("#movies").innerHTML="No results";localStorage.setItem("omdbSessionLastSearch",o.target.value),t.querySelector("#home__title").textContent="Results";const r=await p(o.target.value);if(n=document.createDocumentFragment(),r.Error)return t.querySelector("#movies").innerHTML="No results";t.querySelector("#movies").innerHTML="",r.Search.forEach(t=>{n.appendChild(m(t,e))}),t.querySelector("#movies").appendChild(n),o.target.value="",o.target.blur()}),t},E=()=>{const e=document.createElement("div");let t=d();if(e.innerHTML=f.a,document.getElementById("header__search").classList.add("is-hide"),t.favorites.length>0){const n=document.createDocumentFragment();t.favorites.forEach(e=>{n.appendChild(m(e,t))}),e.querySelector("#movies").appendChild(n)}else e.innerHTML+="No movies";return e},L=()=>{const e=document.createElement("div");return l(document.getElementById("header__menu")),l(document.getElementById("header__search")),document.getElementById("header__logo").style.gridColumn="span 3",e.innerHTML=_.a,e.querySelector("#loginForm").addEventListener("submit",t=>{t.preventDefault();let n=new s(t.target.username.value,t.target.password.value,[]);const o=function(e,t){const n=[];e.length<3&&n.push("Username must be greater than 2 characters");t.length<3&&n.push("Password must be greater than 2 characters");c(e)&&!function(e){return JSON.parse(localStorage.getItem(e.username)).password===e.password}({username:e,password:t})&&n.push("Wrong password");return n}(n.username,n.password);if(o.length>0)return function(e=[],t){const n=document.createDocumentFragment();t.innerHTML="",e.forEach(e=>{const t=document.createElement("p");t.innerText=e,n.appendChild(t)}),u(t),t.appendChild(n),setTimeout(()=>{l(t),t.innerHTML=""},2500*e.length)}(o,e.querySelector("#errors"));c(n.username)?i(n):function(e){const t=new s(e.username,e.password,[]);localStorage.setItem(e.username,JSON.stringify(t)),i(e)}(n),u(document.getElementById("header__menu")),u(document.getElementById("header__search")),u(document.getElementById("header__logo")),document.getElementById("header__logo").style.gridColumn="span 1",location.hash="#/"}),e},w=()=>{const e=document.createElement("div");return e.innerHTML=b.a,e},I=document.getElementById("root"),T=async e=>{if(I.innerHTML="",!d()&&"#/login"!==e)return location.hash="#/login";if(d()&&"#/login"===e)return location.hash="#/";switch(e){case"":case"#/":return I.appendChild(await S());case"#/favorites":return I.appendChild(E());case"#/login":return I.appendChild(L());default:return I.appendChild(w())}},B=document.getElementById("menu"),C=document.getElementById("searchField");function M(){const e=document.getElementById("root");x(B,"is-hide")&&(x(C,"is-hide")||x(e,"is-blur"))?O():e.classList.add("is-blur")}function O(){document.getElementById("root").classList.remove("is-blur")}function x(e,t){return e.classList.contains(t)}window.addEventListener("hashchange",()=>{T(location.hash),l(B),l(C),O()}),window.addEventListener("load",()=>{T(location.hash),document.getElementById("menuButton").addEventListener("click",()=>{B.classList.toggle("is-hide"),l(C),O(),M()}),document.getElementById("searchButton").addEventListener("click",e=>{e.preventDefault(),C.classList.toggle("is-hide"),l(B),O(),M()}),document.getElementById("logout").addEventListener("click",a)}),window.addEventListener("resize",()=>{window.innerWidth>=720&&(l(B),l(C),O())})}]);